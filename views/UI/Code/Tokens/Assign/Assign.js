var Token       = require('../Token'),
    Argument    = require('../Argument'),
    Var         = require('../Literals/Var/Var'),
    key         = require('onkey');

require('./Assign.less');

//Prevent Enter
key('.Code-Assign-Var').down({
    'enter': function(e) {
        e.preventDefault();
    }
});

module.exports = Token.extend('Code-Assign', {
    init: function() {
        this.name   = Var.spawn();
        this.value  = Argument.spawn();

        this.name.$wrapper.removeClass('view-Code-Token');

        this.$wrapper
            .append(this.name.$wrapper)
            .append(' &rArr; ')
            .append(this.value.$wrapper);
    },
    clean: function() {
        this.html('');
    },
    meta: {
        display: "&rArr;"
    },
    run: function() {
        var value = this.value.run();
        this.name.set(value);
        return value;
    },
    focus: function() {
        this.name.focus();
    },
    dump: function() {
        return {
            type:  this.type,
            name:  this.name.dump(),
            value: this.value.dump()
        };
    },
    load: function(content) {
        console.log(content);
        this.name.load(content.name);
        this.value.load(content.value);
    }
});